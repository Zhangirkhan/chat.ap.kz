# API Requirements for Client Management

## Описание функциональности

Система добавления клиентов с поиском и созданием компаний. Клиент должен иметь:
- Имя (обязательно)
- Номер телефона (обязательно) 
- Email (необязательно)
- Привязку к компании (обязательно)
- Примечания (необязательно)

## Необходимые API эндпоинты

### 1. Создание клиента
```
POST /api/clients
```

**Тело запроса:**
```json
{
  "name": "Иван Иванов",
  "phone": "79991234567",
  "email": "ivan@example.com",
  "comment": "Важный клиент",
  "contractor_id": 123
}
```

**Ответ:**
```json
{
  "success": true,
  "message": "Клиент успешно создан",
  "data": {
    "id": 456,
    "name": "Иван Иванов",
    "phone": "79991234567",
    "email": "ivan@example.com",
    "comment": "Важный клиент",
    "contractor_id": 123,
    "contractor": {
      "id": 123,
      "name": "ООО Рога и копыта",
      "email": "info@company.com",
      "phone": "+7 (999) 123-45-67",
      "legal_address": "г. Москва, ул. Примерная, д. 1"
    },
    "is_active": true,
    "created_at": "2024-01-01T12:00:00Z",
    "updated_at": "2024-01-01T12:00:00Z"
  }
}
```

### 2. Поиск компаний
```
GET /api/organizations?search=название&per_page=10
```

**Параметры:**
- `search` - поисковый запрос (минимум 2 символа)
- `per_page` - количество результатов (по умолчанию 10)

**Ответ:**
```json
{
  "success": true,
  "data": [
    {
      "id": 123,
      "name": "ООО Рога и копыта",
      "email": "info@company.com",
      "phone": "+7 (999) 123-45-67",
      "address": "г. Москва, ул. Примерная, д. 1",
      "description": "Описание компании",
      "status": "active",
      "created_at": "2024-01-01T12:00:00Z",
      "updated_at": "2024-01-01T12:00:00Z"
    }
  ]
}
```

### 3. Создание компании
```
POST /api/organizations
```

**Тело запроса:**
```json
{
  "name": "Новая компания"
}
```

**Ответ:**
```json
{
  "success": true,
  "message": "Организация успешно создана",
  "data": {
    "id": 124,
    "name": "Новая компания",
    "email": null,
    "phone": null,
    "address": null,
    "description": null,
    "status": "active",
    "created_at": "2024-01-01T12:00:00Z",
    "updated_at": "2024-01-01T12:00:00Z"
  }
}
```

### 4. Получение списка клиентов
```
GET /api/clients?per_page=50&page=1
```

**Ответ:**
```json
{
  "success": true,
  "data": [
    {
      "id": 456,
      "name": "Иван Иванов",
      "phone": "79991234567",
      "email": "ivan@example.com",
      "comment": "Важный клиент",
      "contractor_id": 123,
      "contractor": {
        "id": 123,
        "name": "ООО Рога и копыта",
        "email": "info@company.com",
        "phone": "+7 (999) 123-45-67",
        "legal_address": "г. Москва, ул. Примерная, д. 1"
      },
      "is_active": true,
      "created_at": "2024-01-01T12:00:00Z",
      "updated_at": "2024-01-01T12:00:00Z"
    }
  ],
  "pagination": {
    "current_page": 1,
    "last_page": 1,
    "per_page": 50,
    "total": 1
  }
}
```

## Валидация

### Клиент
- `name` - обязательное поле, строка, минимум 1 символ
- `phone` - обязательное поле, строка, формат: 11 цифр, начинается с 7
- `email` - необязательное поле, валидный email
- `contractor_id` - обязательное поле, существующий ID компании
- `comment` - необязательное поле, строка

### Компания
- `name` - обязательное поле, строка, минимум 1 символ, уникальное

## Обработка ошибок

Все ошибки должны возвращаться в формате:
```json
{
  "success": false,
  "message": "Описание ошибки",
  "errors": {
    "field_name": ["Сообщение об ошибке"]
  }
}
```

## Коды ошибок

- `400` - Ошибка валидации
- `404` - Компания не найдена
- `422` - Ошибка валидации данных
- `500` - Внутренняя ошибка сервера
