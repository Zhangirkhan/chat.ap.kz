# üë§ –û–¢–ß–ï–¢: –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø –ò–ú–ï–ù –ö–õ–ò–ï–ù–¢–û–í

## ‚úÖ **–ü–†–û–ë–õ–ï–ú–ê –†–ï–®–ï–ù–ê!**

### üìä **–†–ï–ó–£–õ–¨–¢–ê–¢–´:**

| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|----------|---------|--------|
| **–ò–º–µ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ —á–∞—Ç–æ–≤** | –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getClientDisplayName` | ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** |
| **–¢–∏–ø `Chat` –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–µ `client`** | –û–±–Ω–æ–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Chat` | ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** |
| **–û—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏ —Å `import.meta.env.DEV`** | –ó–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ `false` | ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** |
| **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º** | –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–æ–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ | ‚úÖ **–î–û–ë–ê–í–õ–ï–ù–û** |

---

## üêõ **–û–ü–ò–°–ê–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´:**

–í API –æ—Ç–≤–µ—Ç–µ –æ—Ç `https://back-erp.ap.kz/api/chats?per_page=100` –¥–∞–Ω–Ω—ã–µ –æ –∫–ª–∏–µ–Ω—Ç–∞—Ö –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ:

```json
{
  "client": {
    "id": 2,
    "name": "HTML Test",
    "phone": "77755566677",
    "email": null,
    "is_active": true,
    "status": "active",
    "status_label": "–ê–∫—Ç–∏–≤–Ω—ã–π",
    "status_severity": "success",
    "created_at": "2025-09-22T20:40:26.000000Z",
    "updated_at": "2025-09-22T20:49:11.000000Z"
  }
}
```

–ù–æ –≤ –∫–æ–¥–µ —Ñ—É–Ω–∫—Ü–∏–∏ `getClientDisplayName` –∏—Å–∫–∞–ª–∏—Å—å –ø–æ–ª—è `chat.client_name` –∏ `chat.client_phone`, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ API.

---

## üîß **–í–ù–ï–°–ï–ù–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø:**

### **1. –û–±–Ω–æ–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Chat` –≤ `types.ts`**

**–î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è:**
```typescript
export interface Chat {
  id: number
  title?: string
  type?: string
  status: 'active' | 'closed' | 'transferred'
  status_label?: string
  status_severity?: string
  is_messenger_chat?: boolean
  messenger_phone?: string
  messenger_status?: string
  unread_count: number
  last_activity_at?: string
  client_name?: string
  client_phone?: string
  client_email?: string
  client?: {
    id: number
    name: string
    phone: string
    email?: string
    is_active: boolean
    status: string
    status_label: string
    status_severity: string
    created_at: string
    updated_at: string
  }
  department?: Department
  assigned_to?: User
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
}
```

### **2. –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getClientDisplayName` –≤ —Ç—Ä–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö:**

**–í `ChatsList.vue`, `ChatCard.vue`, `ChatArea.vue`:**
```typescript
const getClientDisplayName = (chat: Chat) => {
  // –ï—Å–ª–∏ –µ—Å—Ç—å –∏–º—è –∫–ª–∏–µ–Ω—Ç–∞ –≤ –æ–±—ä–µ–∫—Ç–µ client, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ–≥–æ
  if (chat.client?.name && chat.client.name.trim()) {
    return chat.client.name
  }
  
  // –ï—Å–ª–∏ –µ—Å—Ç—å –∏–º—è –∫–ª–∏–µ–Ω—Ç–∞ –≤ —Å—Ç–∞—Ä–æ–º —Ñ–æ—Ä–º–∞—Ç–µ, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ–≥–æ
  if (chat.client_name && chat.client_name.trim()) {
    return chat.client_name
  }
  
  // –ï—Å–ª–∏ –Ω–µ—Ç –∏–º–µ–Ω–∏, –Ω–æ –µ—Å—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ –æ–±—ä–µ–∫—Ç–µ client, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ–≥–æ
  if (chat.client?.phone && chat.client.phone.trim()) {
    return chat.client.phone
  }
  
  // –ï—Å–ª–∏ –Ω–µ—Ç –∏–º–µ–Ω–∏, –Ω–æ –µ—Å—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ —Å—Ç–∞—Ä–æ–º —Ñ–æ—Ä–º–∞—Ç–µ, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ–≥–æ
  if (chat.client_phone && chat.client_phone.trim()) {
    return chat.client_phone
  }
  
  // –ï—Å–ª–∏ –Ω–µ—Ç –Ω–∏ –∏–º–µ–Ω–∏, –Ω–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º ID —á–∞—Ç–∞
  return `–ß–∞—Ç #${chat.id}`
}
```

### **3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏**

**–ó–∞–º–µ–Ω–µ–Ω–æ:**
```vue
<div v-if="import.meta.env.DEV" class="...">
```

**–ù–∞:**
```vue
<div v-if="false" class="...">
```

**–ü—Ä–∏—á–∏–Ω–∞:** `import.meta.env.DEV` –Ω–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ —à–∞–±–ª–æ–Ω–∞—Ö Vue.

---

## üéØ **–õ–û–ì–ò–ö–ê –†–ê–ë–û–¢–´:**

### **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–º–µ–Ω:**

1. **`chat.client.name`** - –∏–º—è –∫–ª–∏–µ–Ω—Ç–∞ –∏–∑ –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ API
2. **`chat.client_name`** - –∏–º—è –∫–ª–∏–µ–Ω—Ç–∞ –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
3. **`chat.client.phone`** - –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–∑ –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ API
4. **`chat.client_phone`** - –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
5. **`–ß–∞—Ç #${chat.id}`** - ID —á–∞—Ç–∞, –µ—Å–ª–∏ –Ω–µ—Ç –Ω–∏ –∏–º–µ–Ω–∏, –Ω–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞

### **–ü—Ä–∏–º–µ—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:**

- **"HTML Test"** - –µ—Å–ª–∏ `chat.client.name = "HTML Test"`
- **"–ù—É—Ä–≥–∞–ª–∏–µ–≤ –ñ–∞–Ω–≥–∏—Ä—Ö–∞–Ω"** - –µ—Å–ª–∏ `chat.client.name = "–ù—É—Ä–≥–∞–ª–∏–µ–≤ –ñ–∞–Ω–≥–∏—Ä—Ö–∞–Ω"`
- **"77755566677"** - –µ—Å–ª–∏ –Ω–µ—Ç –∏–º–µ–Ω–∏, –Ω–æ –µ—Å—Ç—å `chat.client.phone`
- **"–ß–∞—Ç #2"** - –µ—Å–ª–∏ –Ω–µ—Ç –Ω–∏ –∏–º–µ–Ω–∏, –Ω–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞

---

## üöÄ **–†–ï–ó–£–õ–¨–¢–ê–¢:**

### **‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**

1. **–ò–º–µ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è** –≤ —Å–ø–∏—Å–∫–µ —á–∞—Ç–æ–≤
2. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å–æ —Å—Ç–∞—Ä—ã–º –∏ –Ω–æ–≤—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º API
3. **–°–±–æ—Ä–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç** –±–µ–∑ –æ—à–∏–±–æ–∫
4. **–¢–∏–ø—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã** –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è API

### **üì± –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è:**

- **–°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤** (`ChatsList.vue`)
- **–ö–∞—Ä—Ç–æ—á–∫–∏ —á–∞—Ç–æ–≤** (`ChatCard.vue`)
- **–ó–∞–≥–æ–ª–æ–≤–æ–∫ —á–∞—Ç–∞** (`ChatArea.vue`)

---

## üéâ **–ò–¢–û–ì:**

**üë§ –ò–ú–ï–ù–ê –ö–õ–ò–ï–ù–¢–û–í –¢–ï–ü–ï–†–¨ –û–¢–û–ë–†–ê–ñ–ê–Æ–¢–°–Ø!**

- ‚úÖ **"HTML Test"** - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ **"–ù—É—Ä–≥–∞–ª–∏–µ–≤ –ñ–∞–Ω–≥–∏—Ä—Ö–∞–Ω"** - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å–æ —Å—Ç–∞—Ä—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
- ‚úÖ **–°–±–æ—Ä–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç** –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ **–¢–∏–ø—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã** –¥–ª—è –Ω–æ–≤–æ–≥–æ API

**–¢–µ–ø–µ—Ä—å –≤ —Å–ø–∏—Å–∫–µ —á–∞—Ç–æ–≤ –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —Ä–µ–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤! üöÄ**

---

## üìù **–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:**

### **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ [https://erp.ap.kz/chats](https://erp.ap.kz/chats)
2. –í —Å–ø–∏—Å–∫–µ —á–∞—Ç–æ–≤ –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è:
   - **"HTML Test"** –¥–ª—è —á–∞—Ç–∞ #2
   - **"–ù—É—Ä–≥–∞–ª–∏–µ–≤ –ñ–∞–Ω–≥–∏—Ä—Ö–∞–Ω"** –¥–ª—è —á–∞—Ç–∞ #1

### **–ï—Å–ª–∏ –∏–º–µ–Ω–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ø–æ–ª–µ `client.name`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! ‚ú®**
