# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–ª–∏–µ–Ω—Ç–æ–≤

## üìã –ü—Ä–æ–±–ª–µ–º—ã –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

### **üîÑ –ü—Ä–æ–±–ª–µ–º–∞ 1: –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞**
**–°–∏–º–ø—Ç–æ–º:** –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –≤—Ä—É—á–Ω—É—é –æ–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è.

**–ü—Ä–∏—á–∏–Ω–∞:** –í `ClientsPage.vue` –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞ —Å–ø–∏—Å–æ–∫ –æ–±–Ω–æ–≤–ª—è–ª—Å—è —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ:
```javascript
// ‚ùå –°—Ç–∞—Ä—ã–π –∫–æ–¥ - —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
clients.value.push(response.client)  // –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
clients.value[index] = response.client  // –ü—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
```

**–†–µ—à–µ–Ω–∏–µ:** ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ **–ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞** —Å —Å–µ—Ä–≤–µ—Ä–∞:
```javascript
// ‚úÖ –ù–æ–≤—ã–π –∫–æ–¥ - –ø–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º  
await clientsApi.createClient(clientData)
await loadClients()  // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –≤–µ—Å—å —Å–ø–∏—Å–æ–∫
await loadCompanies()  // –û–±–Ω–æ–≤–ª—è–µ–º –∏ —Å–ø–∏—Å–æ–∫ –∫–æ–º–ø–∞–Ω–∏–π
```

### **üè¢ –ü—Ä–æ–±–ª–µ–º–∞ 2: –ö–ª–∏–µ–Ω—Ç –Ω–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–ª—Å—è –∫ –∫–æ–º–ø–∞–Ω–∏–∏**
**–°–∏–º–ø—Ç–æ–º:** –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π –∫–æ–º–ø–∞–Ω–∏–∏ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞, –∫–ª–∏–µ–Ω—Ç —Å–æ—Ö—Ä–∞–Ω—è–ª—Å—è –±–µ–∑ –∫–æ–º–ø–∞–Ω–∏–∏.

**–ü—Ä–∏—á–∏–Ω–∞:** –í `ClientDialog.vue` –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç —Å–æ—Ö—Ä–∞–Ω—è–ª—Å—è –±–µ–∑ –∫–æ–º–ø–∞–Ω–∏–∏:
```javascript
// ‚ùå –°—Ç–∞—Ä—ã–π –∫–æ–¥ - –º–æ–ª—á–∞–ª–∏–≤—ã–π –æ—Ç–∫–∞—Ç
} catch (error) {
  console.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏:', error)
  emit('save', formData.value)  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ë–ï–ó –∫–æ–º–ø–∞–Ω–∏–∏
}
```

**–†–µ—à–µ–Ω–∏–µ:** ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ **–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**:
```javascript
// ‚úÖ –ù–æ–≤—ã–π –∫–æ–¥ - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ
} catch (companyError) {
  const errorMessage = companyError.message || '–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–∞–Ω–∏—é'
  
  if (confirm(`–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏ "${newCompanyName.value}": ${errorMessage}\n\n–í—Å–µ —Ä–∞–≤–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ –±–µ–∑ –∫–æ–º–ø–∞–Ω–∏–∏?`)) {
    clientData.company_id = undefined  // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–≥–ª–∞—Å–∏–ª—Å—è
  } else {
    return  // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–º–µ–Ω–∏–ª —Å–æ–∑–¥–∞–Ω–∏–µ
  }
}
```

### **‚è≥ –ü—Ä–æ–±–ª–µ–º–∞ 3: –ù–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–ø–∞–Ω–∏–∏**
**–°–∏–º–ø—Ç–æ–º:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–æ–Ω–∏–º–∞–ª —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π –∫–æ–º–ø–∞–Ω–∏–∏.

**–†–µ—à–µ–Ω–∏–µ:** ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã **–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è**:
- üîÑ **–°–ø–∏–Ω–Ω–µ—Ä** –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–ø–∞–Ω–∏–∏: "–°–æ–∑–¥–∞–µ–º –∫–æ–º–ø–∞–Ω–∏—é..."
- üîí **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ñ–æ—Ä–º—ã** –≤–æ –≤—Ä–µ–º—è –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚ú® **–ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏** —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –∑–∞–≥—Ä—É–∑–∫–∏

## üéØ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –∫–æ–¥–µ

### **üìÅ ClientsPage.vue**
```diff
const handleSave = async (clientData) => {
  try {
    if (showEditDialog.value) {
-     const response = await clientsApi.updateClient(...)
-     clients.value[index] = response.client
+     await clientsApi.updateClient(...)
    } else {
-     const response = await clientsApi.createClient(...)  
-     clients.value.push(response.client)
+     await clientsApi.createClient(...)
    }

+   // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
+   await loadClients()
+   await loadCompanies()  // –û–±–Ω–æ–≤–ª—è–µ–º –∏ –∫–æ–º–ø–∞–Ω–∏–∏

    toast.add({ severity: 'success', ... })
  }
}
```

### **üìÅ ClientDialog.vue**
```diff
+ const isCreatingCompany = ref(false)
+ const isSubmitting = ref(false)

const handleSubmit = async () => {
+ if (isSubmitting.value) return
+ isSubmitting.value = true

  if (newCompanyName.value.trim()) {
+   isCreatingCompany.value = true
    
    try {
      const companyResponse = await companiesApi.createCompany(...)
      clientData.company_id = companyResponse.company.id
    } catch (companyError) {
-     emit('save', formData.value)  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –±–µ–∑ –∫–æ–º–ø–∞–Ω–∏–∏
+     // –°–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á—Ç–æ –¥–µ–ª–∞—Ç—å
+     if (confirm('–û—à–∏–±–∫–∞... –í—Å–µ —Ä–∞–≤–Ω–æ —Å–æ–∑–¥–∞—Ç—å –±–µ–∑ –∫–æ–º–ø–∞–Ω–∏–∏?')) {
+       clientData.company_id = undefined
+     } else {
+       return  // –û—Ç–º–µ–Ω—è–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ
+     }
+   } finally {
+     isCreatingCompany.value = false
    }
  }
}
```

### **üé® UI —É–ª—É—á—à–µ–Ω–∏—è**
```vue
<!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏ -->
<p class="text-xs">
  <span v-if="isCreatingCompany" class="text-blue-600">
    <i class="pi pi-spin pi-spinner mr-1"></i>
    –°–æ–∑–¥–∞–µ–º –∫–æ–º–ø–∞–Ω–∏—é...
  </span>
  <span v-else>
    –ï—Å–ª–∏ –∫–æ–º–ø–∞–Ω–∏–∏ –Ω–µ—Ç –≤ —Å–ø–∏—Å–∫–µ, –≤–≤–µ–¥–∏—Ç–µ –µ—ë –Ω–∞–∑–≤–∞–Ω–∏–µ
  </span>
</p>

<!-- –ö–Ω–æ–ø–∫–∞ —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ -->
<button type="submit" :disabled="isSubmitting">
  <i v-if="isSubmitting" class="pi pi-spin pi-spinner"></i>
  <span v-if="isCreatingCompany">–°–æ–∑–¥–∞–µ–º –∫–æ–º–ø–∞–Ω–∏—é...</span>
  <span v-else-if="isSubmitting">–°–æ–∑–¥–∞–µ–º...</span>  
  <span v-else>–°–æ–∑–¥–∞—Ç—å</span>
</button>
```

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ **–¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**

1. **üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** - —Å–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–π
2. **üè¢ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–π** - –∫–ª–∏–µ–Ω—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–≤—è–∑—ã–≤–∞–µ—Ç—Å—è —Å –Ω–æ–≤–æ–π –∫–æ–º–ø–∞–Ω–∏–µ–π
3. **üõ°Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–Ω–∏–º–∞–µ—Ç —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏ –º–æ–∂–µ—Ç –ø—Ä–∏–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏–µ
4. **‚è≥ UX –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å** - –≤–∏–¥–Ω—ã —Å–ø–∏–Ω–Ω–µ—Ä—ã, —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ñ–æ—Ä–º—ã
5. **üìä –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** - –Ω–∏–∫–∞–∫–∏—Ö —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π –º–µ–∂–¥—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –∏ –±—ç–∫–µ–Ω–¥–æ–º

### üöÄ **UX —É–ª—É—á—à–µ–Ω–∏—è:**
- ‚ö° **–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** —Å–ø–∏—Å–∫–æ–≤ –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–π  
- üéØ **–ß–µ—Ç–∫–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å** –æ —Å—Ç–∞—Ç—É—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–π
- üõ°Ô∏è **–ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–π –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö** –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- üîÑ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** —Å —Å–µ—Ä–≤–µ—Ä–æ–º

**–¢–µ–ø–µ—Ä—å —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–ª–∞–≤–Ω–æ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ!** üéØ
